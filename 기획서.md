# 🌲 나무위키 기반 '롤(LoL) 챔피언 상성' 챗봇 기획서

---

## 1. 프로젝트 개요

### 1-1. 프로젝트명
* 나무위키 지식 기반 롤 챔피언 카운터 챗봇 (가칭)

### 1-2. 프로젝트 요약
* 기존의 **'통계(승률) 기반'** 카운터 정보(OP.GG 등)와 차별화되는 **'지식(텍스트) 기반'** 카운터 챗봇을 개발한다.
* 리그 오브 레전드 160여 개 챔피언의 나무위키 '상성' 탭 데이터를 활용하며, 단순 챔피언 나열이 아닌 '하드 카운터'와 '일반 카운터'를 분류하고, 하드 카운터의 **구체적인 이유**까지 요약하여 제공한다.

---

## 2. 핵심 아키텍처 (데이터 파이프라인)

본 프로젝트는 LLM이 실시간으로 모든 작업을 처리하는 '실시간 RAG'가 아닌, **'데이터 전처리 파이프라인'**을 통해 완벽하게 정제된 데이터를 구축하고, 서비스 시점에는 **'단순 조회 + 프롬프트 엔지니어링'**을 사용하는 것을 목표로 한다.

### 2-1. 데이터 전처리 (오프라인 배치)

**목표:** 우리가 원하는 최종 형태의 `JSONL` 데이터를 구축한다.

1.  **크롤링 (Crawling):**
    * `requests` + `BeautifulSoup4` (Python)를 사용.
    * 160여 개 챔피언의 나무위키 페이지 전체 HTML을 수집한다.

2.  **1차 파싱 (각주 맵 생성):**
    * 페이지 하단의 **각주(Footnote)** 섹션을 먼저 파싱한다.
    * `{"35": "제이스가 초반에 딜교를...", "36": "사이온은..."}` 형태의 **'각주 맵' (딕셔너리)**을 챔피언별로 생성한다.

3.  **2차 파싱 (본문 데이터 추출 및 연결):**
    * 본문의 '상성' 탭 → '상대하기 힘든 챔피언' 섹션으로 이동.
    * `<a>` 태그 등 특정 태그를 이용해 '파란색' 챔피언 이름과 옆에 붙은 각주 번호 `[NN]`를 함께 추출한다. (예: `('말파이트', '35')`)
    * 추출한 번호('35')를 '각주 맵'의 Key로 사용하여, 챔피언 이름과 긴 설명 텍스트를 연결(Linking)한다.

4.  **분류 및 요약 (LLM 활용):**
    * 연결된 긴 설명 텍스트 내에 **"하드카운터, 극상성, 닷지, 최악의 상대"**라는 키워드가 있는지 검사한다.
    * **(A) 키워드 O:**
        1.  '하드 카운터'로 분류.
        2.  긴 설명 텍스트를 **LLM API에 전달**하여 "왜 카운터인지 200토큰 이하의 이유로 요약해줘"라고 요청한다.
        3.  요약된 `reason` 텍스트를 저장한다.
    * **(B) 키워드 X:**
        1.  '일반 카운터'로 분류.
        2.  이름만 저장한다.

5.  **최종 저장 (Storage):**
    * 위 모든 정보를 취합하여, 목표했던 구조의 `JSONL` 파일로 저장한다.
    * *최종 결과물 (예시):*
        ```json
        {"champion": "제이스", "hard_counters": [{"name": "말파이트", "reason": "초반에..."}, {"name": "그라가스", "reason": "라인..."}], "general_counters": ["문도 박사", "사이온", ...]}
        {"champion": "아리", "hard_counters": [...], "general_counters": [...]}
        ```

### 2-2. 실제 서비스 아키텍처 (온라인 추론)

**핵심:** 벡터 DB, 청킹, 임베딩 등 복잡한 **'벡터 RAG'를 사용하지 않는다.**

1.  **사용자 입력:** "제이스 카운터 알려줘"
2.  **챔피언 이름 파싱:** 입력된 질문에서 '제이스'라는 핵심 키워드(챔피언 이름)를 추출한다.
3.  **데이터 조회 (Key-Value Lookup):**
    * `JSONL` 파일(혹은 이를 적재한 DB)에서 'champion' 필드가 '제이스'인 라인을 **즉시 검색(Lookup)**한다.
    * (검색 시간: 0.01초 미만)
4.  **프롬프트 엔지니어링:**
    * LLM에게 전달할 프롬프트를 **동적으로 생성**한다.
    * *프롬프트 템플릿 (예시 - 출력 형식 명시):*
        > 너는 롤 전문가야. 아래 [데이터]를 참고해서 **다음 출력 형식에 맞춰 답변해줘.**
        > 
        > 1. **하드 카운터:** 'name'과 'reason'을 조합하여 **번호가 붙은 리스트**로 출력.
        > 2. **일반 카운터:** 'general_counters' 목록을 **콤마(,)로 구분**하여 한 줄로 출력.
        >
        > **[데이터]**
        > (3번에서 조회한 JSON 객체 삽입)
        > 
        > **[출력 형식]**
        > ```
        > ## 하드 카운터
        > 1. [챔피언 이름]: [reason]
        > 2. [챔피언 이름]: [reason]
        > ...
        > ---
        > ## 일반 카운터
        > [챔피언 이름], [챔피언 이름], [챔피언 이름]...
        > ```

5.  **LLM 생성:**
    * LLM은 **이미 요약된 데이터**를 받아 **단순히 형식에 맞게 재구성**만 하면 되므로, 추론 속도가 매우 빠르고 안정적이다.

---